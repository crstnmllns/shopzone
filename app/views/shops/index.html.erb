
<div class="row">
  <div class="col-md-10 offset-1">
    <div class="container">
      <div class="row">
        <% @products.each do |product| %>
          <div class="col-md-3">
            <div class="card" style="width: 14rem; height:40%;">
              <div class="card-img-top" >
                <%=  image_tag product.image.variant(combine_options: { resize: "224x165>", extent: "224x164", background: "#393E40", gravity: "center"}).processed %>
              </div>
              <div class="card-block">
                <h5 class="card-title"><%= product.name %></h5>
                <div class="card-text">
                  <div class="badge badge-primary"><%= product.categories.first.name %></div>
                  <div>$<%= product.prices.map(&:salesprice).last%></div>

                </div>
                <div class="row float-right">
                  <div class="col-md-12">
                    <%= form_for :cart, url: cart_path, method: :put do |f| %>
                      <%= f.hidden_field :product_id, :value => product.id %>
                      <%= f.number_field :quantity, :value => 1, :min => 1 , :max => product.stock %>
                      <%= f.submit "Add to cart" , class: "btn btn-primary btn-sm"%>
                    <% end %>
                  </div>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
